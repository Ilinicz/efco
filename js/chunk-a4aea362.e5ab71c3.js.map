{"version":3,"sources":["webpack:///./src/views/admin/DashboardAppeals.vue?05e8","webpack:///src/views/admin/DashboardAppeals.vue","webpack:///./src/views/admin/DashboardAppeals.vue?c099","webpack:///./src/views/admin/DashboardAppeals.vue","webpack:///./src/views/admin/DashboardAppeals.vue?2111"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","width","attrs","show-header","data","appeals","default-sort","prop","order","row-key","on","row-click","showAppeal","label","formatter","formatDate","sortable","scopedSlots","_u","key","fn","scope","_v","_s","row","description","visible","showAppealDialog","title","appeal","update:visible","$event","proposal","attachments","length","_l","attachment","index","id","href","getUrl","attachment_url","target","_e","slot","type","click","delAppeal","staticRenderFns","DashboardAppealsvue_type_script_lang_js_","name","mounted","_mounted","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","getAppeals","stop","apply","arguments","methods","_getAppeals","_callee2","response","_context2","$http","get","sent","column","cellValue","format","url","concat","_delAppeal","_callee3","_this","_context3","$confirm","confirmButtonText","cancelButtonText","delete","$message","success","filter","_ref","t0","warning","admin_DashboardAppealsvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_DashboardAppeals_vue_vue_type_style_index_0_id_979f1750_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_DashboardAppeals_vue_vue_type_style_index_0_id_979f1750_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-a4aea362.e5ab71c3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"DashboardAppeals\"},[_c('div',{staticClass:\"container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"show-header\":true,\"data\":_vm.appeals,\"default-sort\":{prop: 'created_at', order: 'descending'},\"row-key\":\"id\"},on:{\"row-click\":_vm.showAppeal}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"№\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"formatter\":_vm.formatDate,\"label\":\"Создано\",\"sortable\":\"\",\"prop\":\"created_at\"}}),_c('el-table-column',{attrs:{\"prop\":\"user.email\",\"label\":\"Автор\"}}),_c('el-table-column',{attrs:{\"label\":\"Текст\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"truncate\"},[_vm._v(_vm._s(scope.row.description))])]}}])})],1)],1),_c('el-dialog',{attrs:{\"visible\":_vm.showAppealDialog,\"title\":(\"№ \" + (_vm.appeal.id))},on:{\"update:visible\":function($event){_vm.showAppealDialog=$event}}},[_c('h4',[_vm._v(\"Текст обращения\")]),_c('p',[_vm._v(\"\\n      \"+_vm._s(_vm.appeal.description)+\"\\n    \")]),_c('h4',[_vm._v(\"Предложенные решения\")]),_c('p',[_vm._v(\"\\n      \"+_vm._s(_vm.appeal.proposal)+\"\\n    \")]),(_vm.appeal.attachments.length > 0)?[_c('h4',[_vm._v(\"Вложения\")]),_vm._l((_vm.appeal.attachments),function(attachment,index){return _c('div',{key:attachment.id},[_c('a',{attrs:{\"href\":_vm.getUrl(attachment.attachment_url),\"target\":\"_blank\"}},[_vm._v(\"\\n          Вложение №\"+_vm._s(index + 1)+\"\\n        \")])])})]:_vm._e(),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.delAppeal}},[_vm._v(\"Удалить\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showAppealDialog = false}}},[_vm._v(\"Закрыть\")])],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"DashboardAppeals\">\n    <div class=\"container\">\n      <el-table\n        :show-header=\"true\"\n        :data=\"appeals\"\n        :default-sort=\"{prop: 'created_at', order: 'descending'}\"\n        style=\"width: 100%\"\n        row-key=\"id\"\n        @row-click=\"showAppeal\"\n      >\n        <el-table-column\n          prop=\"id\"\n          label=\"№\"\n          width=\"80\"\n        />\n        <el-table-column\n          :formatter=\"formatDate\"\n          label=\"Создано\"\n          sortable\n          prop=\"created_at\"\n        />\n        <el-table-column\n          prop=\"user.email\"\n          label=\"Автор\"\n        />\n        <el-table-column\n          label=\"Текст\"\n        >\n          <template slot-scope=\"scope\">\n            <span class=\"truncate\">{{ scope.row.description }}</span>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <!-- ### showAppealDialog Start ### -->\n    <el-dialog\n      :visible.sync=\"showAppealDialog\"\n      :title=\"`№ ${appeal.id}`\"\n    >\n      <h4>Текст обращения</h4>\n      <p>\n        {{ appeal.description }}\n      </p>\n      <h4>Предложенные решения</h4>\n      <p>\n        {{ appeal.proposal }}\n      </p>\n\n      <template v-if=\"appeal.attachments.length > 0\">\n        <h4>Вложения</h4>\n\n        <div\n          v-for=\"(attachment, index) in appeal.attachments\"\n          :key=\"attachment.id\"\n        >\n          <a\n            :href=\"getUrl(attachment.attachment_url)\"\n            target=\"_blank\"\n          >\n            Вложение №{{ index + 1 }}\n          </a>\n        </div>\n      </template>\n\n      <span\n        slot=\"footer\"\n        class=\"dialog-footer\"\n      >\n        <el-button\n          type=\"warning\"\n          @click=\"delAppeal\"\n        >Удалить</el-button>\n\n        <el-button\n          type=\"primary\"\n          @click=\"showAppealDialog = false\"\n        >Закрыть</el-button>\n      </span>\n    </el-dialog>\n    <!-- ### showAppealDialog End ### -->\n  </div>\n</template>\n\n<script>\nimport { format } from 'date-fns';\n// import ru from 'date-fns/locale/ru';\n\nexport default {\n  name: 'DashboardAppeals',\n\n  data() {\n    return {\n      appeals: null,\n      appeal: { attachments: [] },\n      showAppealDialog: false,\n    };\n  },\n\n  async mounted() {\n    await this.getAppeals();\n  },\n\n  methods: {\n    async getAppeals() {\n      const response = await this.$http.get('civil_appeals');\n      this.appeals = response.data;\n    },\n\n    formatDate(row, column, cellValue) {\n      return format(cellValue, 'dd.MM.yyyy, HH:mm');\n    },\n\n    showAppeal(row) {\n      this.appeal = row;\n      this.showAppealDialog = true;\n    },\n\n    getUrl(url) {\n      return url\n        ? `${process.env.VUE_APP_API}${url}`\n        : '';\n    },\n\n    async delAppeal() {\n      try {\n        await this.$confirm('Обращение будет удалено. Вы уверены?', 'Удаление обращения', {\n          confirmButtonText: 'Удалить',\n          cancelButtonText: 'Отменить',\n          type: 'warning',\n        });\n        await this.$http.delete(`/civil_appeals/${this.appeal.id}`);\n        this.$message.success('Вы удалили обращение');\n        this.showAppealDialog = false;\n\n        this.appeals = this.appeals.filter(({ id }) => id !== this.appeal.id);\n      } catch (e) {\n        this.$message.warning('Обращение не было удалено.');\n      }\n    },\n  },\n};\n</script>\n\n<style\n  lang=\"scss\"\n  scoped\n>\n.DashboardAppeals {\n\n}\n\n.attachment {\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: space-between;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardAppeals.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardAppeals.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DashboardAppeals.vue?vue&type=template&id=979f1750&scoped=true&\"\nimport script from \"./DashboardAppeals.vue?vue&type=script&lang=js&\"\nexport * from \"./DashboardAppeals.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DashboardAppeals.vue?vue&type=style&index=0&id=979f1750&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"979f1750\",\n  null\n  \n)\n\ncomponent.options.__file = \"DashboardAppeals.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardAppeals.vue?vue&type=style&index=0&id=979f1750&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardAppeals.vue?vue&type=style&index=0&id=979f1750&lang=scss&scoped=true&\""],"sourceRoot":""}