(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c4d3afa"],{7629:function(e,t,s){"use strict";var r=s("a10f"),a=s.n(r);a.a},a10f:function(e,t,s){},c91a:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"DashboardUsers"},[s("div",{staticClass:"toolbar"},[s("div",{staticClass:"group"},[s("el-input",{staticClass:"filter filter-query",attrs:{placeholder:"ФИО, email ...",size:"small"},model:{value:e.filterQuery,callback:function(t){e.filterQuery="string"===typeof t?t.trim():t},expression:"filterQuery"}}),s("el-select",{staticClass:"filter filter-role",attrs:{size:"small",multiple:"","collapse-tags":"",placeholder:"Все роли"},model:{value:e.filterRole,callback:function(t){e.filterRole=t},expression:"filterRole"}},e._l(e.filterRoleOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,disabled:e.disabled,value:e.value}})}))],1),s("div",{staticClass:"group"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.newUserDialog=!0}}},[e._v("Создать Пользователя")])],1)]),s("div",{staticClass:"container"},[s("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:e.filteredUsers,"highlight-current-row":""},on:{"row-click":e.userShow}},[s("el-table-column",{attrs:{prop:"id",label:"#"}}),s("el-table-column",{attrs:{label:"Имя"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.first_name)+" "+e._s(t.row.last_name)+"\n        ")]}}])}),s("el-table-column",{attrs:{prop:"email",label:"Email"}}),s("el-table-column",{attrs:{align:"right",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id===e.current_user.id?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("Вы")]):e._e(),t.row.admin?s("el-tag",{attrs:{"disable-transitions":""}},[e._v("Админ")]):e._e()]}}])})],1)],1),s("el-dialog",{attrs:{visible:e.newUserDialog,title:"Создать пользователя"},on:{"update:visible":function(t){e.newUserDialog=t}}},[s("el-form",{attrs:{model:e.newUser}},[s("el-form-item",{attrs:{"label-width":"80px",label:"Email"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),s("el-form-item",{attrs:{"label-width":"80px",label:"Пароль"}},[s("el-input",{model:{value:e.newUser.password,callback:function(t){e.$set(e.newUser,"password",t)},expression:"newUser.password"}})],1),s("el-form-item",{attrs:{label:"Администратор"}},[s("el-switch",{attrs:{disabled:!0},model:{value:e.newUser.admin,callback:function(t){e.$set(e.newUser,"admin",t)},expression:"newUser.admin"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.newUserDialog=!1}}},[e._v("Отменить")]),s("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("Создать")])],1)],1)],1)},a=[],l=(s("96cf"),s("1da1")),i=s("be94"),n=s("2f62"),o={name:"DashboardUsers",data:function(){return{users:[],filterQuery:"",filterRole:["admin"],filterRoleOptions:[{value:"manager",label:"Менеджер",disabled:!0},{value:"stats",label:"Статист",disabled:!0},{value:"admin",label:"Админ"}],newUserDialog:!1,newUser:{email:"",password:"",password_confirmation:"",admin:!0}}},computed:Object(i["a"])({},Object(n["b"])("auth",["current_user"]),{filteredUsers:function(){var e=this.filterQuery.toLowerCase(),t=this.users;return this.filterRole.length>0&&(t=t.filter(function(e){return e.admin})),t.filter(function(t){var s,r,a,l;return(null===(s=t.first_name)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(r=t.last_name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(a=t.second_name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(l=t.email)||void 0===l?void 0:l.toLowerCase().includes(e))})}}),mounted:function(){this.getUsers()},methods:{getUsers:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/users");case 2:t=e.sent,this.users=t.data;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),userShow:function(e){this.$router.push({name:"DashboardUsersShow",params:{id:e.id}})},createUser:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.newUser.password_confirmation=this.newUser.password,e.next=3,this.$http.post("users",{user:this.newUser});case 3:this.newUserDialog=!1,this.getUsers(),this.$message.success("Пользователь был успешно создан");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},u=o,c=(s("7629"),s("2877")),d=Object(c["a"])(u,r,a,!1,null,"6f5e8222",null);d.options.__file="DashboardUsers.vue";t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-8c4d3afa.70008b27.js.map