(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca4bd1ba"],{"11e9":function(t,e,i){var n=i("52a7"),s=i("4630"),r=i("6821"),a=i("6a99"),o=i("69a8"),c=i("c69a"),u=Object.getOwnPropertyDescriptor;e.f=i("9e1e")?u:function(t,e){if(t=r(t),e=a(e,!0),c)try{return u(t,e)}catch(i){}if(o(t,e))return s(!n.f.call(t,e),t[e])}},3835:function(t,e,i){"use strict";function n(t){if(Array.isArray(t))return t}function s(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)if(i.push(a.value),e&&i.length===e)break}catch(c){s=!0,r=c}finally{try{n||null==o["return"]||o["return"]()}finally{if(s)throw r}}return i}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){return n(t)||s(t,e)||r()}i.d(e,"a",function(){return a})},4489:function(t,e,i){},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,i){var n=i("d3f4"),s=i("8b97").set;t.exports=function(t,e,i){var r,a=e.constructor;return a!==i&&"function"==typeof a&&(r=a.prototype)!==i.prototype&&n(r)&&s&&s(t,r),t}},"8b97":function(t,e,i){var n=i("d3f4"),s=i("cb7c"),r=function(t,e){if(s(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},9093:function(t,e,i){var n=i("ce10"),s=i("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},a2a6:function(t,e,i){},aa77:function(t,e,i){var n=i("5ca1"),s=i("be13"),r=i("79e5"),a=i("fdef"),o="["+a+"]",c="​",u=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(t,e,i){var s={},o=r(function(){return!!a[t]()||c[t]()!=c}),u=s[t]=o?e(p):a[t];i&&(s[i]=u),n(n.P+n.F*o,"String",s)},p=d.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},ac6a:function(t,e,i){for(var n=i("cadf"),s=i("0d58"),r=i("2aba"),a=i("7726"),o=i("32e9"),c=i("84f2"),u=i("2b4c"),l=u("iterator"),d=u("toStringTag"),p=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=s(h),v=0;v<f.length;v++){var g,_=f[v],y=h[_],m=a[_],b=m&&m.prototype;if(b&&(b[l]||o(b,l,p),b[d]||o(b,d,_),c[_]=p,y))for(g in n)b[g]||r(b,g,n[g],!0)}},c4bf:function(t,e,i){"use strict";var n=i("a2a6"),s=i.n(n);s.a},c5f6:function(t,e,i){"use strict";var n=i("7726"),s=i("69a8"),r=i("2d95"),a=i("5dbc"),o=i("6a99"),c=i("79e5"),u=i("9093").f,l=i("11e9").f,d=i("86cc").f,p=i("aa77").trim,h="Number",f=n[h],v=f,g=f.prototype,_=r(i("2aeb")(g))==h,y="trim"in String.prototype,m=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():p(e,3);var i,n,s,r=e.charCodeAt(0);if(43===r||45===r){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+e}for(var a,c=e.slice(2),u=0,l=c.length;u<l;u++)if(a=c.charCodeAt(u),a<48||a>s)return NaN;return parseInt(c,n)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof f&&(_?c(function(){g.valueOf.call(i)}):r(i)!=h)?a(new v(m(e)),i,f):m(e)};for(var b,x=i("9e1e")?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;x.length>C;C++)s(v,b=x[C])&&!s(f,b)&&d(f,b,l(v,b));f.prototype=g,g.constructor=f,i("2aba")(n,h,f)}},e42f:function(t,e,i){"use strict";var n=i("4489"),s=i.n(n);s.a},f887:function(t,e,i){t.exports=i.p+"img/trianglify.0c2b51d9.svg"},fcdf:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isAllReady?i("div",{staticClass:"SurveyPassing"},[i("div",{staticClass:"header"},[i("img",{staticClass:"image",attrs:{src:t.imagePath,alt:"Обложка"}}),i("div",{staticClass:"gradient"},[i("div",{staticClass:"inner"},[t.survey.type?i("div",{staticClass:"tag tag-type"},[t._v("\n          "+t._s(t.surveyType)+"\n        ")]):t._e(),i("div",{staticClass:"name"},[i("h1",[t._v(t._s(t.survey.name))])]),t.survey.description?i("div",{staticClass:"survey-description"},[i("div",{staticClass:"text"},[t._v(t._s(t.survey.description))])]):t._e()])]),t.survey.color?i("div",{staticClass:"border"}):t._e()]),t.isCompleted?i("el-alert",{staticClass:"alert-is-completed",attrs:{closable:!1,title:"Вы уже прошли опрос",type:"success",center:"","show-icon":""}}):t._e(),t.notAuthorized?i("el-alert",{staticClass:"alert-is-completed",attrs:{closable:!1,title:"Зарегистрируйтесь для прохождения опроса",type:"warning",center:"","show-icon":""}}):t._e(),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isFinishing,expression:"isFinishing"}],class:["container",{"is-completed":t.isCompleted,"not-authorized":t.notAuthorized}]},[i("div",{staticClass:"inner"},[!t.isCompleted&&t.survey.start_message?i("div",{staticClass:"start-message"},[t._v("\n        "+t._s(t.survey.start_message)+"\n      ")]):t._e(),t._l(t.survey.questions,function(e,n){return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isSending[e.id],expression:"isSending[question.id]"}],key:e.id,staticClass:"question"},[i("div",{staticClass:"title"},[i("div",{staticClass:"index"},[t._v(t._s(n+1)+".")]),i("p",{staticClass:"description"},[t._v(t._s(e.description))])]),e.multiple?[i("div",{staticClass:"tip"},[t._v("\n            Можно выбрать от "+t._s(e.min)+" до "+t._s(e.max)+" вариантов\n          ")]),t._l(e.options,function(n){return i("el-checkbox",{key:n.id,class:["option",{owned:t.hasOwn(n)}],attrs:{disabled:t.isCompleted||t.hasDisabledCheckbox(e,n),border:""},on:{change:function(i){t.checkboxChanged({question:e})}},model:{value:n.selected,callback:function(e){t.$set(n,"selected",e)},expression:"option.selected"}},[t.isStats?[i("div",{staticClass:"progress",style:{width:t.getStatsPercent(e,n)}}),i("div",{staticClass:"stats"},[i("i",{staticClass:"icon el-icon-check"}),i("div",{staticClass:"percent"},[t._v(t._s(t.getStatsPercent(e,n)))])])]:t._e(),n.description?i("h3",{staticClass:"description"},[i("div",[t._v(t._s(n.description))]),n.total?i("div",{staticClass:"total"},[i("div",{staticClass:"dot"},[t._v(".")]),i("div",[t._v(t._s(n.total))])]):t._e()]):t._e(),n.hint?i("div",{staticClass:"hint"},[t._v("\n              "+t._s(n.hint)+"\n            ")]):t._e(),n.input_field?i("el-input",{staticClass:"input-text",attrs:{disabled:t.isCompleted||!n.selected,maxlength:n.input_field_size,type:"textarea",autosize:"",placeholder:"Введите Ваш комментарий"},on:{change:function(i){t.send({question:e})}},model:{value:n.input_text,callback:function(e){t.$set(n,"input_text",e)},expression:"option.input_text"}}):t._e()],2)})]:t._l(e.options,function(n){return i("div",{key:n.id},[i("el-radio",{class:["option",{owned:t.hasOwn(n)}],attrs:{label:n.id,disabled:t.isCompleted,border:""},on:{change:function(i){t.radioChanged({question:e,option:n})}},model:{value:t.radios[e.id],callback:function(i){t.$set(t.radios,e.id,i)},expression:"radios[question.id]"}},[t.isStats?[i("div",{staticClass:"progress",style:{width:t.getStatsPercent(e,n)}}),i("div",{staticClass:"stats"},[i("i",{staticClass:"icon el-icon-check"}),i("div",{staticClass:"percent"},[t._v(t._s(t.getStatsPercent(e,n)))])])]:t._e(),n.description?i("h3",{staticClass:"description"},[i("div",[t._v(t._s(n.description))]),n.total?i("div",{staticClass:"total"},[i("div",{staticClass:"dot"},[t._v(".")]),i("div",[t._v(t._s(n.total))])]):t._e()]):t._e(),n.hint?i("div",{staticClass:"hint"},[t._v("\n              "+t._s(n.hint)+"\n            ")]):t._e(),n.input_field?["string"===n.input_field_type?i("el-input",{staticClass:"input-text",attrs:{disabled:1!==e.options.length&&!n.selected,maxlength:n.input_field_size,placeholder:t.getInputPlaceholder(n),type:"textarea",autosize:""},on:{focus:function(i){t.specialFocused({question:e,option:n})},change:function(i){t.specialSend({question:e,option:n})}},model:{value:n.input_text,callback:function(e){t.$set(n,"input_text",e)},expression:"option.input_text"}}):"date"===n.input_field_type?i("el-date-picker",{staticClass:"date-picker",attrs:{disabled:1!==e.options.length&&!n.selected,type:"date",placeholder:"Укажите дату"},on:{focus:function(i){t.specialFocused({question:e,option:n})},change:function(i){t.specialSend({question:e,option:n})}},model:{value:n.input_text,callback:function(e){t.$set(n,"input_text",e)},expression:"option.input_text"}}):"number"===n.input_field_type?i("el-input-number",{attrs:{disabled:1!==e.options.length&&!n.selected,min:0,max:n.input_field_size,value:Number(n.input_text)},on:{focus:function(i){t.specialFocused({question:e,option:n})},change:function(i){t.send({question:e,option:n,isInputNumber:!0,value:i})}}}):t._e()]:t._e(),n.attach_file?i("input",{attrs:{disabled:t.isCompleted,type:"file",accept:"*"},on:{change:function(i){t.fileChanged(e,i)}}}):t._e()],2)],1)})],2)}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isAllReady&&!t.isCompleted,expression:"isAllReady && !isCompleted"}],staticClass:"finish"},[t.survey.finish_message?i("div",{staticClass:"finish-message"},[t._v("\n          "+t._s(t.survey.finish_message)+"\n        ")]):t._e(),i("el-button",{staticClass:"complete",attrs:{loading:t.isFinishing,type:"primary"},on:{click:t.finish}},[t._v("\n          Закончить\n        ")])],1)],2)])],1):t._e()},s=[],r=i("3835"),a=(i("ac6a"),i("96cf"),i("1da1")),o=i("be94"),c=(i("c5f6"),i("7f7f"),i("cadf"),i("551c"),i("097d"),i("2f62")),u={name:"SurveyPassing",metaInfo:function(){return{title:this.survey.name}},props:{id:{type:[Number,String],default:-1}},data:function(){return{isAllReady:!1,survey:{},isCompleted:!1,isStats:!1,notAuthorized:!1,radios:{},isSending:{},isFinishing:!1}},computed:Object(o["a"])({},Object(c["b"])("auth",["current_user"]),{imagePath:function(){return this.survey.cover_url?"".concat("//psk35.int.netintel.ru:32713").concat(this.survey.cover_url):i("f887")},surveyType:function(){var t;return null===(t=this.$store.getters["surveys/getTypeByKey"](this.survey.type))||void 0===t?void 0:t.value}}),mounted:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.checkAuth();case 2:this.restoreRadioSelection(),this.isAllReady=!0,this.$nextTick(this.setGeneralColor);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{checkAuth:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.current_user){t.next=10;break}return t.next=3,this.getSurvey("/surveys/".concat(this.id,"/responses"));case 3:if(this.isCompleted=Boolean(this.survey.completed_at),this.isStats=this.isCompleted&&this.survey.public_stats,!this.isStats){t.next=8;break}return t.next=8,this.getStatistic();case 8:t.next=13;break;case 10:return this.notAuthorized=!0,t.next=13,this.getSurvey("/surveys/".concat(this.id));case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getSurvey:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get(e);case 3:i=t.sent,n=i.data,this.survey=n,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("SurveyPassing / getSurvey",t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),restoreRadioSelection:function(){var t,e,i=this;null===(t=this.survey)||void 0===t||null===(e=t.questions)||void 0===e||e.forEach(function(t){t.options.some(function(e){return!!e.selected&&(i.radios[t.id]=e.id,!0)})})},getStatistic:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("/surveys/".concat(this.id,"/statistic"));case 3:e=t.sent,i=e.data,i.questions.forEach(function(t){return t.total=t.options.reduce(function(t,e){return t+=e.total,t},0),t}),this.survey=i,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error("SurveyPassing / getStatistic",t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),setGeneralColor:function(){this.survey.color&&this.$el.style.setProperty("--general-color",this.survey.color)},getInputPlaceholder:function(t){var e=t.input_field_size;return"Введите Ваш комментарий.. (максимум символов: ".concat(e,")")},hasOwn:function(t){var e,i=this;return null===(e=t.question_responses)||void 0===e?void 0:e.some(function(t){return i.current_user.bio_id===t.bio_id})},getStatsPercent:function(t,e){return"".concat((e.total/t.total*100).toFixed(2),"%")},hasDisabledCheckbox:function(t,e){var i=t.max,n=t.options,s=n.reduce(function(t,e){var i=e.selected;return i&&(t+=1),t},0);return!e.selected&&s>=i},checkboxChanged:function(t){var e=t.question,i=e.min,n=e.max,s=e.options,r=s.reduce(function(t,e){var i=e.selected;return i&&(t+=1),t},0);r>=i&&r<=n&&this.send({question:e})},radioChanged:function(t){var e=t.question,i=t.option;e.options.forEach(function(t){t.selected=!1}),i.selected=!0,this.send({question:e})},fileChanged:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e,i){var n,s,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=i.target,s=Object(r["a"])(n.files,1),a=s[0],o=new FileReader,a&&(o.onloadend=function(){console.log("reader.result",o.result)},o.readAsDataURL(a));case 4:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),specialFocused:function(t){var e=t.question,i=t.option;1===e.options.length&&this.$set(this.radios,e.id,i.id)},specialSend:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.question,n=e.option,this.$set(this.isSending,i.id,!0),1===i.options.length&&(n.selected=!0),t.prev=3,t.next=6,this.$http.post("/surveys/".concat(this.id,"/responses"),{survey_response:{survey:this.survey}});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),console.error("SurveyPassing / preSend",t.t0);case 11:return t.prev=11,this.$set(this.isSending,i.id,!1),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[3,8,11,14]])}));return function(e){return t.apply(this,arguments)}}(),send:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var i,n,s,r,a,o,c,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.question,n=e.complete,s=void 0!==n&&n,r=e.option,a=e.isInputNumber,o=void 0!==a&&a,c=e.value,u=void 0===c?"":c,this.$set(this.isSending,i.id,!0),o&&(r.input_text=String(u)),t.prev=3,t.next=6,this.$http.post("/surveys/".concat(this.id,"/responses"),{survey_response:{complete:s,survey:this.survey}});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),console.error("SurveyPassing / send",t.t0);case 11:return t.prev=11,this.$set(this.isSending,i.id,!1),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[3,8,11,14]])}));return function(e){return t.apply(this,arguments)}}(),finish:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isFinishing=!0,t.next=4,this.send({question:{id:void 0},complete:!0});case 4:this.survey.public_stats?this.checkAuth():(this.$router.push({name:"Surveys"}),this.$message.success("Вы успешно прошли опрос.")),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("SurveyPassing / finish",t.t0);case 10:return t.prev=10,this.isFinishing=!1,t.finish(10);case 13:case"end":return t.stop()}},t,this,[[0,7,10,13]])}));return function(){return t.apply(this,arguments)}}()}},l=u,d=(i("c4bf"),i("e42f"),i("2877")),p=Object(d["a"])(l,n,s,!1,null,"ff6ed34a",null);p.options.__file="SurveyPassing.vue";e["default"]=p.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-ca4bd1ba.2de0bf56.js.map